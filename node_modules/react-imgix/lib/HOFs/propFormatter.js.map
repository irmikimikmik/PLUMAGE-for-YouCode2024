{"version":3,"file":"propFormatter.js","names":["React","_interopRequireWildcard","require","_constants","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","_objectEntries","obj","entries","keys","k","length","push","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","len","arr2","l","Symbol","iterator","f","next","done","value","return","isArray","_extends","assign","bind","target","arguments","source","key","apply","formatSrc","src","domain","useHTTPS","undefined","indexOf","strippedDomain","replace","strippedSrc","prefix","formatProps","exports","props","width","height","useHttps","collapseImgixParams","params","compactedParams","_i","_Object$entries","_Object$entries$_i","v","PARAMS_EXP_MAP","processPropsHOF","Component","formattedProps","formattedImgixParams","imgixParams","createElement"],"sources":["../../src/HOFs/propFormatter.js"],"sourcesContent":["import * as React from \"react\";\nimport { PARAMS_EXP_MAP } from \"./constants\";\n\n/**\n * Creates a 1-step, or complete, URL from `domain` and `src` Strings.\n *\n * - First, the function checks if src has a defined `domain`. If it does, it\n * checks to see if `src` has a scheme, and prepends \"http\" or \"https\" as needed\n * - Otherwise, formatSrc formats `domain` and `src` Strings.\n *   - First it strips the two strings of the  leading and `/` or trailing `/`\n *     slash characters.\n *   - Then, it joins the two strings on a `/` character. IE,\n *    `strippedDomain + \"/\" + strippedSrc`.\n *   - If `domain` String argument `null` or `undefined`, the function returns\n *    the original `src` String.\n *\n * @param {String} src - URL that is either 1-step or 2-step\n * @param {String} domain - Domain string, optional\n * @returns 1-step, or complete, URL String. Ex, _assets.ix.net/foo/bar.jpg_\n */\nexport function formatSrc(src, domain, useHTTPS = true) {\n  // ignore if already has protocol\n  if (src.indexOf(\"://\") !== -1) {\n    return src;\n  } else {\n    // prepend domain if defined\n    if (domain == null) {\n      return src;\n    }\n    const strippedDomain = domain ? domain.replace(/^\\/|\\/$/g, \"\") : \"\";\n    const strippedSrc = src.replace(/^\\/|\\/$/g, \"\");\n    const prefix = useHTTPS ? \"https://\" : \"http://\";\n    return prefix + strippedDomain + \"/\" + strippedSrc;\n  }\n}\n\n/**\n * A function that formats the following values in the props Object:\n *\n * - `width`: if undefined or negative gets set to `undefined`.\n * - `height`: if undefined or negative gets set to `undefined`.\n * - `src`: concatenated to `domain` if `src` defined and has no domain.\n *\n * @param {Object} props\n * @returns A formatted `props` Object.\n */\nexport const formatProps = (props) => {\n  const width = !props.width || props.width <= 1 ? undefined : props.width;\n  const height = !props.height || props.height <= 1 ? undefined : props.height;\n  const src = props.src\n    ? formatSrc(props.src, props.domain, props.useHttps)\n    : undefined;\n\n  return Object.assign({}, props, { width, height, src });\n};\n\n/**\n * Function that shortens params keys according to the imgix spec.\n * @param {Object} params - imgixParams object\n * @returns imgixParams object with shortened keys\n * @see https://www.imgix.com/docs/reference\n */\nexport const collapseImgixParams = (params) => {\n  if (params == null) {\n    return params;\n  }\n  const compactedParams = {};\n  for (const [k, v] of Object.entries(params)) {\n    if (PARAMS_EXP_MAP[k]) {\n      compactedParams[PARAMS_EXP_MAP[k]] = v;\n    } else {\n      compactedParams[k] = v;\n    }\n  }\n  return compactedParams;\n};\n\n/**\n * `processPropsHOF` takes a Component's props and formats them to adhere to the\n * ImgixClient's specifications.\n *\n * @param {React.Element<typeof Component>} Component - A react component with\n * defined `props`.\n * @returns A React Component who's `props` have been formatted and\n * `imgixParams` have been collapsed.\n */\nexport const processPropsHOF = (Component) => (props) => {\n  const formattedProps = formatProps(props);\n  const formattedImgixParams = collapseImgixParams(formattedProps.imgixParams);\n\n  return <Component {...formattedProps} imgixParams={formattedImgixParams} />;\n};\n"],"mappings":"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"}