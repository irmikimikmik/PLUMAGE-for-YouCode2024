import React from "react";
import PropTypes from "prop-types";
import { useState } from "react";
import Modal from "./Modal";
import styled from "styled-components";
import { P } from "@arcteryx/components-typography";

const InfoIconWrapper = styled.div`
  display: flex;
  flex-flow: column no-wrap;
  justify-content: ${props => props.justify || "flex-start"};

  p {
    display: inline-block;
    margin: 0 5px 0 0;
  }
`;

const InfoIcon = styled.span`
  content: url("https://images-dynamic-arcteryx.imgix.net/foundation-ui/svgs/Information_Icon.svg");
  height: 15px;
  width: 15px;
  display: inline-block;
  cursor: pointer;
  margin-top: 4px;
`;

/*
  * This component will display an icon and when clicked will open a modal with the contents from the provided url
  *
  * @param {string} labelText - The text displayed on the left side of the icon
  * @param {string} modalUrl - The url of the content to be displayed in the modal
  * @param {string} justify - Set the value for 'flex-justify. Default: "flex-start"
**/
const InfoIconModal = ({ labelText, modalUrl, justify }) => {
  const [modalIsShown, toggleModal] = useState(false);
  const [modalCaller, setModalCaller] = useState();

  const callModal = e => {
    e.preventDefault();
    setModalCaller(e.currentTarget);
    toggleModal(!modalIsShown);
  };

  if (modalUrl) {
    return (
      <InfoIconWrapper justify={justify}>
        { labelText ? <P>{labelText}</P> : null }
        <InfoIcon onClick={callModal} className="qa-info-icon-modal" />
        <Modal modalIsShown={modalIsShown} toggleModal={toggleModal} modalCaller={modalCaller} iframe>
          <iframe src={modalUrl}></iframe>
        </Modal>
      </InfoIconWrapper>
    );
  }
  return null;
}

export default InfoIconModal;


InfoIconModal.prototype = {
  modalUrl: PropTypes.string.isRequired,
};
