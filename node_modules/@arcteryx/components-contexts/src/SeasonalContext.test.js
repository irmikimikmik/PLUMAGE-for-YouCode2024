import React from "react";
import { render } from "@testing-library/react";
import "@testing-library/jest-dom/extend-expect";
import { SeasonalContextProvider, SeasonalContextConsumer } from "./SeasonalContext";

describe("SeasonalContext tests", () => {
  test("SeasonalConsumer reads from props to set context", () => {
    const tree = (
      <SeasonalContextProvider year="20" season="F">
        <SeasonalContextConsumer>
          {({ year, season }) => (
            <p>
              Context is: {year}-{season}
            </p>
          )}
        </SeasonalContextConsumer>
      </SeasonalContextProvider>
    );
    const { getByText } = render(tree);
    expect(getByText(/^Context is:/)).toHaveTextContent("Context is: 20-F");
  });

  test("SeasonalConsumer reads SOME props to set context", () => {
    const tree = (
      <SeasonalContextProvider season="F">
        <SeasonalContextConsumer>
          {({ year, season }) => (
            <p>
              Context is: {year}-{season}
            </p>
          )}
        </SeasonalContextConsumer>
      </SeasonalContextProvider>
    );
    const { getByText } = render(tree);
    expect(getByText(/^Context is:/)).toHaveTextContent("Context is: -F");
  });
});
