import React from "react";
import { render } from "@testing-library/react";
import HelpBottomLayout from "./HelpBottomLayout";
import "jest-styled-components";
import "@testing-library/jest-dom/extend-expect";

const cmsContent = {
  path: "help/order-tracking",
  left: [
    {
      content:
        '<h2>ORDER STATUS</h2>\n\n<ul><li>\n\t<p>Once your order has been processed, an order confirmation email will be sent to you that contains your order confirmation number. Keep this number to track your order and process returns.</p>\n\t</li>\n\t<li>\n\t<p>Your shipping confirmation with tracking number will be sent via email once your order has left our warehouse.</p>\n\t</li>\n\t<li>\n\t<p>Once an order has been placed and payment has been taken, the order cannot be cancelled. After receiving your order you can create a return request for it by clicking <a href="/help/returns">Returns and Refunds.</a></p>\n\t</li>\n\t<li>\n\t<p>The estimated processing and delivery time is up to 7 business days.</p>\n\t</li>\n</ul>',
      className: null,
    },
  ],
  right: [
    {
      content:
        '<h2>Can\'t Find what you are looking for?</h2>\n\n<p>If you are unable to find the information you are looking for in the customer support centre please contact one of our Customer Service Representatives and we will help answer your questions.</p>\n\n<p><strong>Customer Service Hours<!-- -->:</strong></p>\n\n<p data-pm-slice="1 1 []">Note: We are following recommendations from our local health authorities for COVID-19. Due to a high volume of contacts and limitations to our office capacity, our response may be delayed.</p>\n\n<p><strong><a class="replace-cs-phone" href="tel:1-866-458-2473">1-866-458-2473</a></strong><br />\nAmericas: 8am-5pm, Mon-Fri PST<br />\nEurope: 9am-5pm, Mon-Fri CET</p>\n\n<p><strong><a href="/help/contact">Contact Us Form</a></strong><br />\nCurrently, our response time is 2 to 3 business days.</p>\n',
      className: "help__icon-tooltip",
    },
  ],
};

const cmsContentNoLeft = {
  path: "help/order-tracking",
  right: [
    {
      content:
        '<h2>Can\'t Find what you are looking for?</h2>\n\n<p>If you are unable to find the information you are looking for in the customer support centre please contact one of our Customer Service Representatives and we will help answer your questions.</p>\n\n<p><strong>Customer Service Hours<!-- -->:</strong></p>\n\n<p data-pm-slice="1 1 []">Note: We are following recommendations from our local health authorities for COVID-19. Due to a high volume of contacts and limitations to our office capacity, our response may be delayed.</p>\n\n<p><strong><a class="replace-cs-phone" href="tel:1-866-458-2473">1-866-458-2473</a></strong><br />\nAmericas: 8am-5pm, Mon-Fri PST<br />\nEurope: 9am-5pm, Mon-Fri CET</p>\n\n<p><strong><a href="/help/contact">Contact Us Form</a></strong><br />\nCurrently, our response time is 2 to 3 business days.</p>\n',
      className: "help__icon-tooltip",
    },
  ],
};

const cmsContentNoRight = {
  path: "help/order-tracking",
  left: [
    {
      content:
        '<h2>ORDER STATUS</h2>\n\n<ul><li>\n\t<p>Once your order has been processed, an order confirmation email will be sent to you that contains your order confirmation number. Keep this number to track your order and process returns.</p>\n\t</li>\n\t<li>\n\t<p>Your shipping confirmation with tracking number will be sent via email once your order has left our warehouse.</p>\n\t</li>\n\t<li>\n\t<p>Once an order has been placed and payment has been taken, the order cannot be cancelled. After receiving your order you can create a return request for it by clicking <a href="/help/returns">Returns and Refunds.</a></p>\n\t</li>\n\t<li>\n\t<p>The estimated processing and delivery time is up to 7 business days.</p>\n\t</li>\n</ul>',
      className: null,
    },
  ],
};

const cmsContentReturns = {
  path: "account/returns",
  left: [
    {
      content:
        '<h2>Returns Policy</h2>\n\n<ul><li>\n\t<p>Items purchased at <a href="https:///www.arcteryx.com">arcteryx.com</a> may be returned for up to 30 days <span lang="EN-US" xml:lang="EN-US" xml:lang="EN-US"><span><span><span><span>after the original delivery date</span></span></span></span></span>. Purchases from outlet.arcteryx.com must be returned on the <a href="https://outlet.arcteryx.com/help/returns">Outlet Returns page</a>.</p>\n\t</li>\n\t<li>\n\t<p>Items may also be brought to your nearest Brand Store where the team can facilitate your return back to our warehouse for processing.</p>\n\t</li>\n\t<li>\n\t<p>For safety and health reasons, climbing harnesses, underwear and the Reusable Face Mask cannot be returned. Shoes must be in their original packaging. The Voltair must not have been deployed.</p>\n\t</li>\n\t<li>\n\t<p>Refunds are issued in the form of the original payment. Arc\'teryx will provide a full refund for the value of the purchased item in the same form as the original payment.</p>\n\t</li>\n\t<li>\n\t<p>Refunds may take between 5-7 business days to process once an item has been delivered to our warehouse. *For United Kingdom returns - Currently, refunds may take up to 3 weeks to be processed once received.</p>\n\t</li>\n\t<li>\n\t<p>Items must be in as new condition and returned in their original packaging.</p>\n\t</li>\n\t<li>\n\t<p>Items purchased anywhere except arcteryx.com must be returned to the original place of purchase.</p>\n\t</li>\n</ul>',
      className: null,
    },
  ],
  right: [
    {
      content:
        '<h2>Can\'t Find what you are looking for?</h2>\n\n<p>If you are unable to find the information you are looking for in the customer support centre please contact one of our Customer Service Representatives and we will help answer your questions.</p>\n\n<p><strong>Customer Service Hours<!-- -->:</strong></p>\n\n<p data-pm-slice="1 1 []">Note: We are following recommendations from our local health authorities for COVID-19. Due to a high volume of contacts and limitations to our office capacity, our response may be delayed.</p>\n\n<p><strong><a class="replace-cs-phone" href="tel:1-866-458-2473">1-866-458-2473</a></strong><br />\nAmericas: 8am-5pm, Mon-Fri PST<br />\nEurope: 9am-5pm, Mon-Fri</p>\n\n<p><strong><a href="/help/contact">Contact Us Form</a></strong><br />\nCurrently, our response time is 2 to 3 business days.</p>\n',
      className: "help__icon-tooltip",
    },
    {
      content:
        '<h2 style="margin: 2em 0 1em;">PRODUCT SERVICE</h2>\n\n<p>Need help with your Arc\'teryx product?</p>\n\n<p style="margin: 1em 0 0;"><a href="/help/product-service">View our Product Service Page</a></p>\n',
      className: "help__icon-tooltip",
    },
  ],
};
const helpSizingContent = {
  left: [
    {
      content:
        "Please note that garment fit and length may vary from season to season as designs are revised or materials are updated.",
      type: "alert",
      alertType: "info",
    },
    {
      content:
        "<p>Our garments are designed with fits appropriate to the intended activity that take into account ergonomics, comfort, layer systems and also to maximize the performance of fabric technologies.</p>",
    },
  ],
  right: [
    {
      content:
        '<h2>Can\'t Find what you are looking for?</h2>\n\n<p>If you are unable to find the information you are looking for in the customer support centre please contact one of our Customer Service Representatives and we will help answer your questions.</p>\n\n<p>Customer Service Hours:</p>\n\n<p><a class="replace-cs-phone" href="tel:1-866-458-2473">1-866-458-2473</a><br /><br />\nAmericas: 8am-5pm PST, Monday to Friday  <br />  <br />\nEurope: 9am-5pm, Monday to Friday</p>\n\n<p><a href="/help/contact">Contact Us Form</a><br />\n',
      className: "help__icon-size-tooltip",
    },
  ],
};
describe("help layout component", () => {
  afterEach(() => {
    jest.clearAllMocks();
  });
  it("matches snapshots using html", () => {
    const { container } = render(<HelpBottomLayout isHtml {...cmsContent} />);
    expect(container.firstChild).toMatchSnapshot();
  });

  it("matches snapshots using html with no right content", () => {
    const { container } = render(<HelpBottomLayout isHtml {...cmsContentNoRight} />);
    expect(container.querySelector(".help-bottom-layout--left")).toBeTruthy();
    expect(container.querySelector(".help-bottom-layout--right")).toBe(null);
  });

  it("matches snapshots using html with no left content", () => {
    const { container } = render(<HelpBottomLayout isHtml {...cmsContentNoLeft} />);
    expect(container.querySelector(".help-bottom-layout--left")).toBe(null);
    expect(container.querySelector(".help-bottom-layout--right")).toBeTruthy();
  });

  it("matches snapshots using html with more than 1 items in a content", () => {
    const { container } = render(<HelpBottomLayout isHtml {...cmsContentReturns} />);
    expect(container.firstChild).toMatchSnapshot();
  });

  it("matches snapshots without using html", () => {
    const { container } = render(<HelpBottomLayout {...cmsContent} />);
    expect(container.firstChild).toMatchSnapshot();
  });

  it("matches snapshots without using html and no left content", () => {
    const { container } = render(<HelpBottomLayout {...cmsContentNoLeft} />);
    expect(container.querySelector(".help-bottom-layout--left")).toBe(null);
    expect(container.querySelector(".help-bottom-layout--right")).toBeTruthy();
  });

  it("matches snapshots without using html and no right content", () => {
    const { container } = render(<HelpBottomLayout {...cmsContentNoRight} />);
    expect(container.querySelector(".help-bottom-layout--left")).toBeTruthy();
    expect(container.querySelector(".help-bottom-layout--right")).toBe(null);
  });

  it("matches snapshots with specified widths", () => {
    const { container } = render(<HelpBottomLayout {...cmsContent} leftWidth="70" rightWidth="30" />);
    expect(container.firstChild).toMatchSnapshot();
  });

  it("matches snapshots with no top border", () => {
    const { container } = render(<HelpBottomLayout {...cmsContent} leftWidth="70" rightWidth="30" hideTopBorder />);
    expect(container.firstChild).toMatchSnapshot();
  });

  it("matches snapshots with no top border", () => {
    const { container } = render(
      <HelpBottomLayout
        {...helpSizingContent}
        isHtml
        rightWidth="24"
        leftWidth="100"
        hideTopBorder={true}
        isHelpPageSizing={true}
      />
    );
    expect(container.firstChild).toMatchSnapshot();
  });
});
