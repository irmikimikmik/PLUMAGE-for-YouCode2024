import React from "react";
import { render, screen } from "@testing-library/react";
import "@testing-library/jest-dom/extend-expect";
import { ImageTextLinkBox } from "./ImageTextLinkBox"; // Import ImageTextLinkBox component

describe("<ImageTextLinkBox />", () => {
  const image = {
    image: {
      src: "https://images-dynamic-arcteryx.imgix.net/nav/feature/s20/men-shell-finder.jpg",
      alt: "Example Image",
    },
    sourceElementsArray: [],
  };
  const label = "Jacket Finder";
  const url = "https://arcteryx.com/ca/en/shop/jacket-finder";
  const target = "_blank";

  test("it should render the ImageTextLinkBox component", () => {
    render(
      <ImageTextLinkBox
        image={image}
        label={label}
        url={url}
        target={target}
      />,
    );

    const imageTextLinkBox = screen.getByTestId("ImageTextLinkBox");

    expect(imageTextLinkBox).toBeInTheDocument();
  });

  test("it should render the image with correct src and alt", () => {
    render(
      <ImageTextLinkBox
        image={image}
        label={label}
        url={url}
        target={target}
      />,
    );

    const imageElement = screen.getByAltText("Example Image");

    expect(imageElement).toBeInTheDocument();
    expect(imageElement).toHaveAttribute(
      "src",
      "https://images-dynamic-arcteryx.imgix.net/nav/feature/s20/men-shell-finder.jpg",
    );
  });

  test("it should render the label correctly", () => {
    render(
      <ImageTextLinkBox
        image={image}
        label={label}
        url={url}
        target={target}
      />,
    );

    const firstPartElement = screen.getByText("Jacket");
    const restLabelElement = screen.getByText("Finder");

    expect(firstPartElement).toBeInTheDocument();
    expect(restLabelElement).toBeInTheDocument();
  });

  test("it should render the link with correct href and target", () => {
    render(
      <ImageTextLinkBox
        image={image}
        label={label}
        url={url}
        target={target}
      />,
    );

    const linkElement = screen.getByRole("link");

    expect(linkElement).toBeInTheDocument();
    expect(linkElement).toHaveAttribute(
      "href",
      "https://arcteryx.com/ca/en/shop/jacket-finder",
    );
    expect(linkElement).toHaveAttribute("target", "_blank");
  });
});
