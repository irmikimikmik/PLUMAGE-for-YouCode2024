import React, { type FC } from "react";
import { type VideoIframeProps } from "./VideoIframe.types";
import styled from "styled-components";

const StyledVideoIframe = styled.iframe`
  border: none;
`;

export const VideoIframe: FC<VideoIframeProps> = ({
  url,
  isMuted = true,
  isAutoPlayed = false,
  allowFullScreen = true,
}) => {
  // Handle the case where url might be undefined or null
  if (url === "") {
    return null;
  }

  const autoPlayString = isAutoPlayed ? "&autoplay=1" : "&autoplay=0";
  const muteString = isMuted ? "&mute=1" : "&mute=0";

  return (
    <StyledVideoIframe
      src={`${url}${autoPlayString}${muteString}`}
      allow={isAutoPlayed ? "autoplay" : ""}
      allowFullScreen={allowFullScreen}
      data-testid="video-iframe"
    ></StyledVideoIframe>
  );
};
