import React from "react";
import { render } from "@testing-library/react";
import "@testing-library/jest-dom/extend-expect";
import { CollapseGroup } from "./CollapseGroup";
import { type AccordionProps } from "./CollapseGroup.type";
import "@testing-library/jest-dom";

const items: AccordionProps[] = [
  {
    title: "Accordion 1",
    content: [
      {
        _key: "2f6ed22ece05",
        _type: "block",
        children: [
          {
            _key: "230faea91e7c",
            _type: "span",
            marks: [],
            text: "This is the content for Accordion 1",
          },
        ],
        markDefs: [],
        style: "normal",
      },
    ],
  },
  {
    title: "Accordion 1",
    content: [
      {
        _key: "2f6ed22ece05",
        _type: "block",
        children: [
          {
            _key: "230faea91e7c",
            _type: "span",
            marks: [],
            text: "This is the content for Accordion 2",
          },
        ],
        markDefs: [],
        style: "normal",
      },
    ],
  },
  {
    title: "Accordion 1",
    content: [
      {
        _key: "2f6ed22ece05",
        _type: "block",
        children: [
          {
            _key: "230faea91e7c",
            _type: "span",
            marks: [],
            text: "This is the content for Accordion 3",
          },
        ],
        markDefs: [],
        style: "normal",
      },
    ],
  },
];

const collapseGroupProps = {
  className: "test-class",
  title: "Test Title",
  items,
};

describe("CollapseGroup", () => {
  let container: HTMLElement;

  beforeEach(() => {
    const rendered = render(<CollapseGroup {...collapseGroupProps} />);
    container = rendered.container;
  });
  it("renders CollapseGroup component with correct number of items", () => {
    const accordionItems = container.querySelectorAll(".accordion");
    expect(accordionItems.length).toBe(collapseGroupProps.items.length);
  });

  it("renders CollapseGroup component with provided className", () => {
    const { container } = render(<CollapseGroup {...collapseGroupProps} />);
    const collapseGroup = container.querySelector(".test-class");
    expect(collapseGroup).toBeInTheDocument();
  });
});
