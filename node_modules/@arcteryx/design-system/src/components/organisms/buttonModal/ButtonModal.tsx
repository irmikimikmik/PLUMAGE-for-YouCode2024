import { Modal } from "@arcteryx/components-modal";
import { Button } from "@arcteryx/components-button";

import React from "react";
import { type ButtonProps } from "../../atoms/button/Button.types";

export interface ButtonModalProps
  extends Pick<ButtonProps, "context" | "onClick" | "onContextMenu"> {
  url: string;
  label: string;
}

export const ButtonModal: React.FC<ButtonModalProps> = (props) => {
  const [modalIsShown, toggleModal] = React.useState(false);
  const [modalCaller, setModalCaller] = React.useState();

  const onClick = (e: any): void => {
    setModalCaller(e.currentTarget);
    toggleModal(!modalIsShown);
    if (props.onClick !== undefined) {
      props.onClick();
    }
  };
  return (
    <>
      <Button
        context={props.context}
        onClick={onClick}
        onContextMenu={props.onContextMenu}
      >
        {props.label}
      </Button>
      <Modal
        modalIsShown={modalIsShown}
        toggleModal={toggleModal}
        modalCaller={modalCaller}
        isClosable={true}
        isFullscreen={false}
        iframe={true}
      >
        <iframe src={props.url}></iframe>
      </Modal>
    </>
  );
};
