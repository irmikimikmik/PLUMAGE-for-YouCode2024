{"version":3,"file":"index.js","sources":["../../src/useIntersectionObserver.js","../../src/useSSR.js","../../src/useIsOnScreen.js"],"sourcesContent":["import { useEffect } from \"react\";\n\n/**\n * useIntersectionObserver\n * @param {ref} target ref of the element\n * @param {object} src\n * @param {function} onIntersect callback\n * @param {number} threshold\n * @param {string} rootMargin how much space from the screen to when the window meets\n * @param {boolean} enabled enables or disables the hook\n * @param {array} deps list of products\n * @param {number} delay to handle timing issues from smooth scrolling when product changes\n */\n\nexport const useIntersectionObserver = ({\n  target,\n  src = null,\n  onIntersect,\n  threshold = 0,\n  rootMargin = \"0px\",\n  enabled = true,\n  deps = null,\n  delay = 0,\n}) => {\n  useEffect(() => {\n    const { current } = target;\n    let observer;\n    if (enabled && current && typeof IntersectionObserver !== \"undefined\") {\n      setTimeout(() => {\n        observer = new IntersectionObserver(onIntersect, {\n          rootMargin,\n          threshold,\n          root: src ? src.current : null,\n        });\n        observer.observe(current);\n      }, delay);\n    }\n\n    return () => {\n      if (observer) {\n        observer.unobserve(current);\n      }\n    };\n  }, deps);\n};\n","import { useState, useEffect, useMemo } from \"react\";\n\nexport const useSSR = () => {\n  const isDOMavailable = !!(typeof window !== \"undefined\" && window.document && window.document.createElement);\n  const [inBrowser, setInBrowser] = useState(isDOMavailable);\n\n  useEffect(() => {\n    setInBrowser(isDOMavailable);\n    return () => {\n      setInBrowser(false);\n    };\n  }, []);\n\n  return useMemo(\n    () => ({\n      isBrowser: inBrowser,\n      isServer: !inBrowser,\n      canUseWorkers: typeof Worker !== \"undefined\",\n      canUseEventListeners: inBrowser && !!window.addEventListener,\n      canUseViewport: inBrowser && !!window.screen,\n    }),\n    [inBrowser]\n  );\n};\n","import { useRef, useState } from \"react\";\nimport { useIntersectionObserver } from \"./useIntersectionObserver\";\n\n/** Only changes state to isOnScreen once then disables the observer */\nexport function useIsOnScreen({ rootMargin = \"500px\" } = { rootMargin: \"500px\" }) {\n  const ref = useRef(null);\n  const [isOnScreen, setIsOnScreen] = useState(false);\n  useIntersectionObserver({\n    target: ref,\n    rootMargin,\n    enabled: !isOnScreen,\n    deps: [isOnScreen],\n    onIntersect: ([{ isIntersecting }]) => {\n      setIsOnScreen(isIntersecting);\n    },\n  });\n  return {\n    ref,\n    isOnScreen,\n  };\n}\n"],"names":["useIntersectionObserver","target","src","onIntersect","threshold","rootMargin","enabled","deps","delay","useEffect","current","observer","IntersectionObserver","setTimeout","root","observe","unobserve","useSSR","isDOMavailable","window","document","createElement","inBrowser","setInBrowser","useState","useMemo","isBrowser","isServer","canUseWorkers","Worker","canUseEventListeners","addEventListener","canUseViewport","screen","useIsOnScreen","ref","useRef","isOnScreen","setIsOnScreen","isIntersecting"],"mappings":";;;;;;;;;;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;AAEO,QAAMA,uBAAuB,GAAG,IASjC,IAAA;IAAA,IATkC;MACtCC,MAAM;EACNC,IAAAA,GAAG,GAAG,IAAI;MACVC,WAAW;EACXC,IAAAA,SAAS,GAAG,CAAC;EACbC,IAAAA,UAAU,GAAG,KAAK;EAClBC,IAAAA,OAAO,GAAG,IAAI;EACdC,IAAAA,IAAI,GAAG,IAAI;EACXC,IAAAA,KAAK,GAAG,CAAA;KACT,GAAA,IAAA,CAAA;EACCC,EAAAA,eAAS,CAAC,MAAM;MACd,MAAM;EAAEC,MAAAA,OAAAA;EAAQ,KAAC,GAAGT,MAAM,CAAA;EAC1B,IAAA,IAAIU,QAAQ,CAAA;MACZ,IAAIL,OAAO,IAAII,OAAO,IAAI,OAAOE,oBAAoB,KAAK,WAAW,EAAE;EACrEC,MAAAA,UAAU,CAAC,MAAM;EACfF,QAAAA,QAAQ,GAAG,IAAIC,oBAAoB,CAACT,WAAW,EAAE;YAC/CE,UAAU;YACVD,SAAS;EACTU,UAAAA,IAAI,EAAEZ,GAAG,GAAGA,GAAG,CAACQ,OAAO,GAAG,IAAA;EAC5B,SAAC,CAAC,CAAA;EACFC,QAAAA,QAAQ,CAACI,OAAO,CAACL,OAAO,CAAC,CAAA;SAC1B,EAAEF,KAAK,CAAC,CAAA;EACX,KAAA;EAEA,IAAA,OAAO,MAAM;EACX,MAAA,IAAIG,QAAQ,EAAE;EACZA,QAAAA,QAAQ,CAACK,SAAS,CAACN,OAAO,CAAC,CAAA;EAC7B,OAAA;OACD,CAAA;KACF,EAAEH,IAAI,CAAC,CAAA;EACV;;AC1CO,QAAMU,MAAM,GAAG,MAAM;EAC1B,EAAA,MAAMC,cAAc,GAAG,CAAC,EAAE,OAAOC,MAAM,KAAK,WAAW,IAAIA,MAAM,CAACC,QAAQ,IAAID,MAAM,CAACC,QAAQ,CAACC,aAAa,CAAC,CAAA;IAC5G,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGC,cAAQ,CAACN,cAAc,CAAC,CAAA;EAE1DT,EAAAA,eAAS,CAAC,MAAM;MACdc,YAAY,CAACL,cAAc,CAAC,CAAA;EAC5B,IAAA,OAAO,MAAM;QACXK,YAAY,CAAC,KAAK,CAAC,CAAA;OACpB,CAAA;KACF,EAAE,EAAE,CAAC,CAAA;IAEN,OAAOE,aAAO,CACZ,OAAO;EACLC,IAAAA,SAAS,EAAEJ,SAAS;MACpBK,QAAQ,EAAE,CAACL,SAAS;EACpBM,IAAAA,aAAa,EAAE,OAAOC,MAAM,KAAK,WAAW;EAC5CC,IAAAA,oBAAoB,EAAER,SAAS,IAAI,CAAC,CAACH,MAAM,CAACY,gBAAgB;EAC5DC,IAAAA,cAAc,EAAEV,SAAS,IAAI,CAAC,CAACH,MAAM,CAACc,MAAAA;EACxC,GAAC,CAAC,EACF,CAACX,SAAS,CAAC,CACZ,CAAA;EACH;;ECpBA;EACO,SAASY,aAAa,GAAqD;IAAA,IAApD;EAAE7B,IAAAA,UAAU,GAAG,OAAA;EAAQ,GAAC,GAAG,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAA;EAAEA,IAAAA,UAAU,EAAE,OAAA;KAAS,CAAA;EAC9E,EAAA,MAAM8B,GAAG,GAAGC,YAAM,CAAC,IAAI,CAAC,CAAA;IACxB,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGd,cAAQ,CAAC,KAAK,CAAC,CAAA;EACnDxB,EAAAA,uBAAuB,CAAC;EACtBC,IAAAA,MAAM,EAAEkC,GAAG;MACX9B,UAAU;MACVC,OAAO,EAAE,CAAC+B,UAAU;MACpB9B,IAAI,EAAE,CAAC8B,UAAU,CAAC;EAClBlC,IAAAA,WAAW,EAAE,IAA0B,IAAA;EAAA,MAAA,IAAzB,CAAC;EAAEoC,QAAAA,cAAAA;EAAe,OAAC,CAAC,GAAA,IAAA,CAAA;QAChCD,aAAa,CAACC,cAAc,CAAC,CAAA;EAC/B,KAAA;EACF,GAAC,CAAC,CAAA;IACF,OAAO;MACLJ,GAAG;EACHE,IAAAA,UAAAA;KACD,CAAA;EACH;;;;;;;;;;;;"}