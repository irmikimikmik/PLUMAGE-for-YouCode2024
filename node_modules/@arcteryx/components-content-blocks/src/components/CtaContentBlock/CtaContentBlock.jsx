import React from "react";
import { ContentContainer } from "./components/ContentContainer";
import { generateBackgroundType } from "./helpers";
import { VideoBackgroundWrapper } from "./components/VideoBackgroundWrapper";
import { BackgroundImageWrapper } from "./components/BackgroundImageWrapper";

const backgroundMap = {
  backgroundImage: BackgroundImageWrapper,
  backgroundVideo: VideoBackgroundWrapper,
  backgroundColor: ContentContainer,
};

export const CtaContentBlock = ({
  backgroundImage,
  backgroundVideoUrl,
  containerStyles = {},
  elements = [],
  elementsContainerStyles = {},
  type,
}) => {
  // Default values for Styled Block - this ensures that the value is an object and never undefined.
  const { responsiveStyles: { desktop: containerDesktopStyles = {}, tablet: containerTabletStyles = {} } = {} } =
    containerStyles;

  const { responsiveStyles: { desktop: elementListDesktopStyles = {}, tablet: elementListTabletStyles = {} } = {} } =
    elementsContainerStyles;

  const backgroundType = generateBackgroundType(backgroundImage, backgroundVideoUrl);
  const Block = backgroundMap[backgroundType] ?? <></>;
  return (
    <Block
      backgroundVideoUrl={backgroundVideoUrl}
      backgroundImage={backgroundImage}
      containerDesktopStyles={containerDesktopStyles}
      containerStyles={containerStyles}
      containerTabletStyles={containerTabletStyles}
      elementListDesktopStyles={elementListDesktopStyles}
      elementListTabletStyles={elementListTabletStyles}
      elements={elements}
      elementsContainerStyles={elementsContainerStyles}
      layout={type}
    />
  );
};
